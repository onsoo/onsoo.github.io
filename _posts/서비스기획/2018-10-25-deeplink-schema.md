---
layout: post
title: 서비스기획을 위한 IT지식 - 딥링크와 스키마
category: 서비스기획
tags: [서비스기획, 앱기획, IT]
comments: true
---

### SUMMARY 

- 앱 내부 콘텐츠로 연결하는 바로 링크는 `딥 링크`
- `딥 링크` 중 하나의 기술이 `URI 스킴`, 앱 스키마 커스텀 설정 후 사용
- `URI 스킴`에는 앱이 설치 안되어 있는 경우 에러가 뜨고, 다른 스킴과 겹쳐 충돌이 일어날 수 있음
- 그래서 iOS와 android에서는 요즘 `유니버셜 링크`와 `앱 링크`를 주로 활용함 
- 근데 링크 실행 전에 바로 앱으로 연결되어 마케팅 추적이 어렵다는 단점이 있음
    - 앗. 그런데 충분히 추적할 수 있다고 한다. [여기](http://www.wisetracker.co.kr/비개발자를-위한-유니버셜-링크-핵심-개념/) 읽어볼 것

## 딥 링크란?

- **사용자가 앱 내부 콘텐츠에 직접 도달하도록 해주는 모든 링크를 의미한다.**
- 유니버설 링크, URI 스킴 및 앱 링크는 모바일 딥 링크가 작동하도록 하는 기술들이다.
  
>딥 링크는 단순히 개념일 뿐입니다. 우리는 사실 딥 링크를 매일 이용하는데, 아마 이 블로그 포스트를 읽기 위해 클릭하셨을 수도 있습니다. 이 용어는 단지 특정 콘텐츠에 직접 도달하는 모든 링크를 뜻할 뿐입니다. 사람들이 http://example.com/my-awesome-content-page URL을 클릭할 때 http://example.com/ 으로 이동하여 다시 웹사이트를 뒤져서 my-awesome-content-page로 이동하는 것을 예상하지는 않습니다. 달리 말해서, 웹의 대다수 링크는 사실상 딥링크이며 단지 그렇게 부르고 있지 않을 뿐입니다. 우리에게 이는 단지 링크일 뿐입니다.
> 
>모바일 앱의 딥 링크는 훨씬 더 복잡하지만, 모바일 딥 링크는 여전히 앱 사용자에게 만족스런 콘텐츠 경험을 제공하는 가장 좋은 방법입니다. 유니버설 링크, URI 스킴 및 앱 링크는 모바일 딥 링크가 작동하도록 하는 다양한 기술 표준으로 사용자가 앱 내부 콘텐츠에 직접 도달하도록 해줍니다. 모바일 앱 내부 페이지를 친구와 공유하려 한다면, 딥 링크는 친구를 해당 페이지로 인도합니다. 딥 링크가 없다면, 친구는 스스로 정확한 페이지를 찾으려 발버둥 칠 것이며, 때때로 앱스토어에 있거나(심지어 앱이 이미 설치되어 있는데도) 모바일 웹에 있는 자신을 발견하게 될 것입니다.
>
> 출처 : [유니버설 링크, URI 스킴, 앱 링크 및 딥 링크: 무슨 차이가 있을까요?](https://blog.branch.io/ko/%EC%9C%A0%EB%8B%88%EB%B2%84%EC%84%A4-%EB%A7%81%ED%81%AC-uri-%EC%8A%A4%ED%82%B4-%EC%95%B1-%EB%A7%81%ED%81%AC-%EB%B0%8F-%EB%94%A5-%EB%A7%81%ED%81%AC-%EB%AC%B4%EC%8A%A8-%EC%B0%A8%EC%9D%B4%EA%B0%80/)

![](https://t1.daumcdn.net/cfile/tistory/23576636594B653B08)

## 스키마란?
외부에서 자신의 앱에 접근할 수 있도록 해주는 하나의 통로[^1]이다. URI 스킴을 활용한 것으로, 우리가 평소에 웹 사이트 주소로 활용하는 URL(URI 하위개념)와 비슷한 활용이라고 보면 된다. 

[^1]: '스키마와 딥링크' [보러가기](http://hkn10004.tistory.com/42)

웹사이트를 통해 앱을 실행시킬 수 있도록, 사전에 URI 스킴을 만들고 애플리케이션에서 스키마 설정 해줄 수 있다. 

```
# 페이스북과 카카오의 커스텀 스키마
fb://
kakaotalk://
```

## [URI 스킴이란?](https://ko.wikipedia.org/wiki/%ED%86%B5%ED%95%A9_%EC%9E%90%EC%9B%90_%EC%8B%9D%EB%B3%84%EC%9E%90)

통합 자원 식별자(Uniform Resource Identifier, URI)는 인터넷에 있는 원을 나타내는 유일한 주소이다. URI의 존재는 인터넷에서 요구되는 기본조건으로서 인터넷 프로토콜에 항상 붙어 다닌다. 스킴은 프로토콜을 지정하는 부분을 의미한다.


### URI의 하위 개념으로 URL

- URL(Uniform Resource Locator)
    - (우리가 아는 URL이 맞다. 즉 모든 URL이 URI이다.)
    - 네트워크 상에서 자원이 어디 있는지를 알려주기 위한 규약
    - 웹 사이트 주소로 알고 있지만, URL은 웹 사이트 주소뿐만 아니라 컴퓨터 네트워크상의 자원을 모두 나타낼 수 있다
    - 그 주소에 접속하려면 해당 URL에 맞는 프로토콜을 알아야 하고, 그와 동일한 프로토콜로 접속해야 한다. 
    - URL은 제일 앞에 자원에 접근할 방법을 정의해 둔 프로토콜 이름을 적고, 그를 구분하기 위한 구분자인 `:`을 적는다.
    - 예를 들어 우리가 웹사이트 주소로 자주 활용하는 HTTP인 경우에는 웹 브라우저를 이용해야 하는 URL이다.


#### URI 문법

일반 URI는 다음과 같은 형태를 나타낸다. 프로토콜을 구분하는 구분자 `:` 앞 부분을 `scheme`이다. 

```
 scheme:[//[user[:password]@]host[:port]][/path][?query][#fragment]
```



## URI 스킴의 단점[^2]

URI 스킴에 있어서 다음 두 가지 상황을 쉽게 처리할 수 없는 심각한 단점이 존재한다.

1. 앱이 설치되지 않은 경우 : 앱이 설치되어 있지 않은 경우 에러가 발생
2. 두 개 이상의 앱이 myapp://에 응답하려 하는 경우 : 중앙 등록 시스템이 없어 막을 수 있는 방법이 없음

이러한 한계로 iOS와 안드로이드는 각각 유니버설 링크와 앱 링크로 알려진 2세대 딥 링크 표준을 개발하였다.

## 유니버설 링크와 앱 링크[^2]

- 앱 고유 콘텐츠 유형의 URI 스킴과 달리 유니버설 앱과 앱 링크는 웹 페이지와 앱 내부의 특정 콘텐츠를 가리키는 단순한 **표준 웹 링크**이다.
- 유니버설 링크 혹은 앱 링크가 열리면 장치는 해당 도메인에 등록된 설치된 장치가 있는지 확인한다. 만약 있다면 웹 페이지를 구동하지 않고 해당 앱을 즉시 시작하고, 앱이 없다면 기본 웹 브라우저로 해당 웹 URL을(앱 혹은 플레이 스토어로의 간단한 재설정일 수 있음) 시작한다.

> 마케팅 참고
> 
> 앱이 즉시 시작된다는 것은 재설정 체인에 기반을 둔 전통적인 웹과 이메일 마케팅 추적 방법이 더는 동작하지 않음을 뜻합니다. 이는 심각한 문제일 수 있는데 현재로는 유니버설 링크와 앱 링크 표준 모두 해결책이 부족합니다. 유일한 옵션은 앱이 구동된 후 소급하여 클릭을 측정하는 것입니다.

[^2]: [유니버설 링크, URI 스킴, 앱 링크 및 딥 링크: 무슨 차이가 있을까요?](https://blog.branch.io/ko/%EC%9C%A0%EB%8B%88%EB%B2%84%EC%84%A4-%EB%A7%81%ED%81%AC-uri-%EC%8A%A4%ED%82%B4-%EC%95%B1-%EB%A7%81%ED%81%AC-%EB%B0%8F-%EB%94%A5-%EB%A7%81%ED%81%AC-%EB%AC%B4%EC%8A%A8-%EC%B0%A8%EC%9D%B4%EA%B0%80/) 발췌 정리


#### 2018-10-29 추가 내용
- 딥링크 클릭시, 앱이 없어 앱 다운로드로 연결되는 경우 셜치 후 바로 원하는 페이지로도 이동하게 설정이 가능하다고 한다. 
- (나중에 알아볼 것)

----